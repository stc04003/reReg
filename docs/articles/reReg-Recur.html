<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creating `Recur` objects • reReg</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Creating `Recur` objects">
<meta property="og:description" content="reReg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">reReg</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/reReg-Recur.html">Creating `Recur` objects</a>
    </li>
    <li>
      <a href="../articles/reReg-plot.html">Visualization of recurrent event data</a>
    </li>
    <li>
      <a href="../articles/reReg-reg.html">Fitting semiparametric regression model to recurrent event data</a>
    </li>
    <li>
      <a href="../articles/reReg-sims.html">Simulating recurrent event data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://github.com/stc04003/reReg/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="reReg-Recur_files/header-attrs-2.7/header-attrs.js"></script><script src="reReg-Recur_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Creating <code>Recur</code> objects</h1>
                        <h4 class="author">Sy Han (Steven) Chiou</h4>
            
            <h4 class="date">2021-04-08</h4>
      
      <small class="dont-index">Source: <a href="http://github.com/stc04003/reReg/blob/master/vignettes/reReg-Recur.Rmd"><code>vignettes/reReg-Recur.Rmd</code></a></small>
      <div class="hidden name"><code>reReg-Recur.Rmd</code></div>

    </div>

    
    
<p>In this vignette, we demonstrate how to create a recurrent event object with the <code><a href="../reference/Recur.html">Recur()</a></code> function from the <strong><code>reda</code></strong> package <span class="citation">(Wang et al. 2021)</span>. The <code><a href="../reference/Recur.html">Recur()</a></code> function is imported when the <strong><code>reReg</code></strong> package is loaded. The <code>Recur</code> objectbundles together a set of recurrent times, failure time, and censoring status, with the convenience that it can be used as the response in model formula in the <strong><code>reReg</code></strong> package. We will illustrate the usage of <code><a href="../reference/Recur.html">Recur()</a></code> with the <code>cgd</code> data set from the <strong><code>survival</code></strong> <span class="citation">(Therneau 2021)</span> and the <code>readmission</code> data set from the <strong><code>frailtypack</code></strong> package <span class="citation">(Rondeau, Mazroui, and González 2012, @gonzalez2005sex)</span>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(reReg)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">packageVersion</span>(<span class="st">"reReg"</span>)</span></code></pre></div>
<pre><code>[1] '1.4.0'</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">data</span>(readmission, <span class="dt">package =</span> <span class="st">"frailtypack"</span>)</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(readmission)</span></code></pre></div>
<pre><code>  id enum t.start t.stop time event      chemo    sex dukes charlson death
1  1    1       0     24   24     1    Treated Female     D        3     0
2  1    2      24    457  433     1    Treated Female     D        0     0
3  1    3     457   1037  580     0    Treated Female     D        0     0
4  2    1       0    489  489     1 NonTreated   Male     C        0     0
5  2    2     489   1182  693     0 NonTreated   Male     C        0     0
6  3    1       0     15   15     1 NonTreated   Male     C        3     0</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="op">&gt;</span><span class="st"> </span>readmission &lt;-<span class="st"> </span><span class="kw">subset</span>(readmission, <span class="op">!</span>(id <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">60</span>, <span class="dv">109</span>, <span class="dv">280</span>)))</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">attach</span>(readmission)</span></code></pre></div>
<div id="therecur-object" class="section level2">
<h2 class="hasAnchor">
<a href="#therecur-object" class="anchor"></a>The<code>Recur</code> object</h2>
<p>The <code><a href="../reference/Recur.html">Recur()</a></code> function is modeled after the <code>Surv()</code> function in the <strong><code>survival</code></strong> package <span class="citation">(Therneau 2021)</span>. The function interface of <code><a href="../reference/Recur.html">Recur()</a></code> is</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">args</span>(Recur)</span></code></pre></div>
<pre><code>function (time, id, event, terminal, origin, check = c("hard", 
    "soft", "none"), ...) 
NULL</code></pre>
<p>The six arguments are</p>
<ul>
<li>
<code>time</code> a vector that represents the time of recurrent events and censoring, or as a list of time intervals that contains the starting time and the ending time of the interval. In the latter, the intervals are assumed to be open on the left and closed on the right, where the right end points are the time of recurrent events and censoring.</li>
<li>
<code>id</code> specifies the subject identity. It can be numeric vector, character vector, or a factor vector. If it is left unspecified, <code><a href="../reference/Recur.html">Recur()</a></code> will assume that each row represents a subject.</li>
<li>
<code>event</code> is a numeric vector that represents the types of the recurrent events. Logical vector is allowed and converted to numeric vector. Non-positive values are internally converted to zero indicating censoring status.</li>
<li>
<code>terminal</code> is a numeric vector that represents the status of the terminal event. Logical vector is allowed and converted to numeric vector. Non-positive values are internally converted to zero indicating censoring status. If a scalar value is specified, all subjects will have the same status of terminal events at their last recurrent episodes. The length of the specified <code>terminal</code> should be equal to the number of subjects, or number of data rows. In the latter case, each subject may have at most one positive entry of <code>terminal</code> at the last recurrent episode.</li>
<li>
<code>origin</code> a numerical vector indicating the time origin of each subject. If a scalar value is specified, all subjects will have the same origin at the specified value. The length of the specified <code>origin</code> should be equal to the number of subjects, or number of data rows. In the latter case, different subjects may have different origins. However, one subject must have the same origin. In addition to numeric values, <code>Date</code> and <code>difftime</code> are also supported and converted to numeric values.</li>
<li>
<code>check</code> is a character value specifying how to perform the checks for recurrent event data. Errors or warnings will be thrown, respectively, if the <code>check</code> is specified to be <code>"hard"</code> (default) or <code>"soft"</code>. If <code>check = "none"</code> is specified, no data checking procedure will be run.</li>
</ul>
When the time origin is zero for all subjects as in the <code>readmission</code> data set, the <code>time</code> argument can be specified with <code>time = t.stop</code> or with <code>time = t.start %to% t.stop</code>, where the infix operator <code><a href="../reference/Recur-pipe.html">%to%</a></code> is used to create a list of two elements containing the endpoints of the time intervals. When <code>check = "hard"</code> or <code>check = "soft"</code>, the <code><a href="../reference/Recur.html">Recur()</a></code> function performs an internal check for possible issues on the data structure. The <code><a href="../reference/Recur.html">Recur()</a></code> function terminates and issues an error message once the check failed if <code>check = "hard"</code> (default). On the contrary, <code><a href="../reference/Recur.html">Recur()</a></code> would proceed with a warning message when <code>check = "soft"</code> or without a warning message when <code>check = "none"</code>. The checking criterion includes the following:
<p>The <code><a href="../reference/Recur.html">Recur()</a></code> function matches the arguments by position when the arguments’ names are not specified. Among all the arguments, only the argument <code>time</code> does not have default values and has to be specified by users. The default value for the argument <code>id</code> is <code><a href="https://rdrr.io/r/base/seq.html">seq_along(time)</a></code>, thus, <code><a href="../reference/Recur.html">Recur()</a></code> assumes each row specifies the time point for each subject when <code>id</code> is not specified. However, using the default value <code>id</code> defeats the purpose using recurrent event methods. The default value for the argument <code>event</code> is a numerical vector, where the values 0 and 1 are used to indicate whether the endpoint of the time intervals in <code>time</code> is a non-recurrent event or a recurrent event, respectively. The <code>event</code> argument can accommodate more than one types of recurrent events; in this case the reference level (value 0) is used to indicate non-recurrent event. On the other hand, a zero vector is used as the default value for arguments <code>terminal</code> and <code>orgin</code>.</p>
<p>The default values in <code><a href="../reference/Recur.html">Recur()</a></code> are chosen so that <code><a href="../reference/Recur.html">Recur()</a></code> can be conveniently adopted in common situations. For example, in situations where the recurrent events are observed continuously and in the absence of terminal events, the <code>event</code> and <code>terminal</code> arguments can be left unspecified. In this case, the last entry within each subject will be treated as a censoring time. One example is the <code>cgd</code> data from the <strong><em>survival</em></strong> package, where the recurrent event is the serious infection observed from a placebo controlled trial of gamma interferon in chronic granulotamous disease. A terminal event was not defined in the <code>cgd</code> data and the patients were observed through the end of study. For this dataset, the <code>Recur</code> object can be constructed as below:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">data</span>(cgd, <span class="dt">package =</span> <span class="st">"survival"</span>)</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">with</span>(cgd, <span class="kw">Recur</span>(tstart <span class="op">%2%</span><span class="st"> </span>tstop, id))</span></code></pre></div>
<pre><code>...
  [1] 1: (0, 219], (219, 373], (373, 414+]      
  [2] 2: (0, 8], (8, 26], ..., (350, 439+]      
  [3] 3: (0, 382+]                              
  [4] 4: (0, 388+]                              
  [5] 5: (0, 246], (246, 253], (253, 383+]      
  [6] 6: (0, 364+]                              
  [7] 7: (0, 292], (292, 364+]                  
  [8] 8: (0, 363+]                              
  [9] 9: (0, 294], (294, 349+]                  
 [10] 10: (0, 371+]                             
...</code></pre>
<p>For each subject, the function <code><a href="../reference/Recur.html">Recur()</a></code> prints intervals to represent the duration until the next event (a recurrent event or a terminal event). The <code>Recur</code> object for the <code>readmission</code> dataset can be constructed as below:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">Recur</span>(t.stop, id, event, death)</span></code></pre></div>
<pre><code>...
  [1] 1: (0, 24], (24, 457], (457, 1037+]           
  [2] 2: (0, 489], (489, 1182+]                     
  [3] 3: (0, 15], (15, 783*]                        
  [4] 4: (0, 163], (163, 288], ..., (686, 2048+]    
  [5] 5: (0, 1134], (1134, 1144+]                   
  [6] 6: (0, 627], (627, 1190], ..., (1406, 1407+]  
  [7] 7: (0, 38], (38, 42], ..., (63, 1049+]        
  [8] 8: (0, 1466*]                                 
  [9] 9: (0, 148], (148, 1474+]                     
 [10] 10: (0, 1113+]                                
...</code></pre>
<p>The <code>readmission</code> example above shows patient id #1 experienced 2 hostpital readmissions with a terminal event at <code>t = 1037</code> (days). The <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> at <code>t = 1037</code> indicates the terminal time was censored, e.g., this patient did not experience the event of interest (death) at <code>t = 1037</code>. Similarly, patient id #3 has one readmission and died at <code>t = 783</code> (days) as indicated by <code><a href="https://rdrr.io/r/base/Arithmetic.html">*</a></code> at <code>783</code>. On the other hand patient id # 4 has more than 3 readmissions and was censored at <code>t = 2048</code> (days). The readmission intervals was suppressed to prevent printing results wider than the screen allowance. The number of intervals to be printed can be tuned using the <code>options</code> and argument <code>reda.Recur.maxPrint</code>.</p>
<p>Readers are referred to a separate <a href="https://wenjie-stat.me/reda/articles/reda-recur">vignette on <code>Recur()</code></a> for a detailed introduction of <code><a href="../reference/Recur.html">Recur()</a></code>. <strong><span style="color:red">The <code><a href="../reference/reSurv.html">reSurv()</a></code> function is being deprecated in Version 1.2.0.</span></strong> In the current version, the <code><a href="../reference/reSurv.html">reSurv()</a></code> function can still be used, but the <code>reSurv</code> object will be automatically transformed to the corresponding <code>Recur</code> object.</p>
</div>
<div id="reference" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#reference" class="anchor"></a>Reference</h2>
<div id="refs" class="references hanging-indent">
<div id="ref-gonzalez2005sex">
<p>González, Juan Ramón, Esteve Fernandez, Víctor Moreno, Josepa Ribes, Mercè Peris, Matilde Navarro, Maria Cambray, and Josep Maria Borrás. 2005. “Sex Differences in Hospital Readmission Among Colorectal Cancer Patients.” <em>Journal of Epidemiology &amp; Community Health</em> 59 (6): 506–11.</p>
</div>
<div id="ref-rondeau2012frailtypack">
<p>Rondeau, Virginie, Yassin Mazroui, and Juan Ramń González. 2012. “frailtypack: An R Package for the Analysis of Correlated Survival Data with Frailty Models Using Penalized Likelihood Estimation or Parametrical Estimation.” <em>Journal of Statistical Software</em> 47 (4): 1–28.</p>
</div>
<div id="ref-R:survival">
<p>Therneau, Terry M. 2021. <em>A Package for Survival Analysis in R</em>. <a href="https://CRAN.R-project.org/package=survival">https://CRAN.R-project.org/package=survival</a>.</p>
</div>
<div id="ref-R:reda">
<p>Wang, Wenjie, Haoda Fu, Sy Han Chiou, and Jun Yan. 2021. <em>reda: Recurrent Event Data Analysis</em>. <a href="https://github.com/wenjie2wang/reda">https://github.com/wenjie2wang/reda</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Sy Han (Steven) Chiou, Chiung-Yu  Huang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
